{"version":3,"file":"d3plus-export.js","sources":["../src/svgPresets.js","../src/dom2canvas.js","../src/saveElement.js"],"sourcesContent":["/**\n    @function svgPresets\n    @desc Adds SVG default attributes to a d3 selection in order to redner it properly.\n    @param {Selection} selection\n*/\nexport default function(selection) {\n\n  // sets \"stroke-width\" attribute to `0` if not defined\n  const strokeWidth = selection.attr(\"stroke-width\");\n  selection.attr(\"stroke-width\", !strokeWidth ? 0 : strokeWidth);\n\n  // sets \"fill-opacity\" attribute to `0` if fill is \"transparent\" or \"none\"\n  const transparent = [\"none\", \"transparent\"].includes(selection.attr(\"fill\"));\n  const fillOpacity = selection.attr(\"fill-opacity\");\n  selection.attr(\"fill-opacity\", transparent ? 0 : fillOpacity);\n\n}\n","import html2canvas from \"html2canvas\";\nimport canvg from \"canvg-browser\";\nimport {select, selectAll} from \"d3-selection\";\n\nimport svgPresets from \"./svgPresets\";\n\nconst defaultOptions = {\n  background: false,\n  callback: () => {},\n  exclude: [],\n  padding: 0,\n  scale: 1\n};\n\nconst canvgOptions = {\n  ignoreMouse: true,\n  ignoreAnimation: true,\n  ignoreDimensions: true,\n  ignoreClear: true\n};\n\n/**\n    @function parseTransform\n    @desc Extracts scale, x, and y position from an elements \"transform\" attribute, respecting cross-browser render differences.\n    @param {HTMLElement} elem The element to be analyzed.\n    @private\n*/\nfunction parseTransform(elem) {\n\n  const property = select(elem).attr(\"transform\");\n  let scale = 1, x = 0, y = 0;\n  if (property) {\n    scale = property.match(/scale\\(([^a-z]+)\\)/i);\n    if (scale) scale = parseFloat(scale[1]);\n    else scale = 1;\n    const translate = property.match(/translate\\(([^a-z]+)\\)/i);\n    if (translate) {\n      [x, y] = translate[1]\n        .replace(\", \", \",\")\n        .replace(/([^a-z]),*\\s([^a-z])/gi, \"$1,$2\")\n        .split(\",\")\n        .map(d => parseFloat(d) * scale);\n    }\n  }\n  return [scale, x, y];\n\n}\n\n/**\n    @function dom2canvas\n    @desc Renders HTML/SVG elements to a shared canvas.\n    @param {HTMLElement|Object|Array} elem The element or array of elements to be rendered to a single canvas. Additionally, a complex object can be passed as an element which can contain specific other properties.\n    @param {Number} [elem.x] The x offset of the element within the rendered canvas.\n    @param {Number} [elem.y] The y offset of the element within the rendered canvas.\n    @param {Object} [options] Additional options to specify.\n    @param {String} [options.background] Background color of the rendered canvas.\n    @param {Function} [options.callback] Callback function to be passed the canvas element after rendering.\n    @param {Array} [options.excludes] An array of HTMLElement objects to be excluded from the render.\n    @param {Number} [options.height] Pixel height for the final output. If a height value has not been passed, it will be inferred from the sizing of the first DOM element passed.\n    @param {Number} [options.padding = 0] Outer padding for the final file.\n    @param {Number} [options.scale = 1] Scale for the final file.\n    @param {Number} [options.width] Pixel width for the final output. If a width value has not been passed, it will be inferred from the sizing of the first DOM element passed.\n*/\nexport default function(elem, options) {\n\n  if (!elem) return;\n  if (!(elem instanceof Array)) elem = [elem];\n\n  options = Object.assign({}, defaultOptions, options);\n  const IE = new RegExp(/(MSIE|Trident\\/|Edge\\/)/i).test(navigator.userAgent);\n  const ratio = window ? window.devicePixelRatio || 1 : 1;\n\n  let reference = elem[0];\n  if (reference.constructor === Object) reference = reference.element;\n\n  const height = options.height ||\n          parseFloat(select(reference).style(\"height\")) +\n          parseFloat(select(reference).style(\"padding-top\")) +\n          parseFloat(select(reference).style(\"padding-bottom\")),\n        width = options.width ||\n          parseFloat(select(reference).style(\"width\")) +\n          parseFloat(select(reference).style(\"padding-left\")) +\n          parseFloat(select(reference).style(\"padding-right\"));\n\n  let layerX, layerY, offsetX = 0, offsetY = 0;\n  if (reference.getBoundingClientRect) {\n    const bounds = reference.getBoundingClientRect();\n    offsetX = bounds.left;\n    offsetY = bounds.top;\n  }\n  else {\n    offsetX = reference.offsetLeft;\n    offsetY = reference.offsetTop;\n  }\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = (width + options.padding * 2) * options.scale * ratio;\n  canvas.height = (height + options.padding * 2) * options.scale * ratio;\n  canvas.style.width = (width + options.padding * 2) * options.scale;\n  canvas.style.height = (height + options.padding * 2) * options.scale;\n\n  const context = canvas.getContext(\"2d\");\n  context.scale(options.scale * ratio, options.scale * ratio);\n  context.clearRect(0, 0, canvas.width / ratio, canvas.height / ratio);\n\n  if (options.background) {\n    context.beginPath();\n    context.rect(0, 0, canvas.width / ratio, canvas.height / ratio);\n    context.fillStyle = options.background;\n    context.fill();\n  }\n\n  const layers = [];\n\n  function checkRender(trans) {\n\n    const tag = (this.tagName || \"\").toLowerCase();\n    if (options.exclude.includes(this) || tag === \"foreignobject\") return;\n\n    const transform = Object.assign({}, trans);\n\n    // strips translate and scale from transform property\n    if (this.tagName) {\n\n      const opacity = select(this).attr(\"opacity\") || select(this).style(\"opacity\");\n      const display = select(this).style(\"display\");\n      const visibility = select(this).style(\"visibility\");\n      if (display === \"none\" || visibility === \"hidden\" || opacity && parseFloat(opacity) === 0) return;\n\n      const tag = this.tagName.toLowerCase();\n\n      if (tag.length && [\"defs\", \"title\", \"desc\"].includes(tag)) return;\n\n      if (tag === \"svg\") {\n\n        // do not perform this transform for SVGs nested within other SVGs\n        if (!transform.svg) {\n          const {left, top} = this.getBoundingClientRect();\n          transform.x += left - offsetX;\n          transform.y += top - offsetY;\n          transform.svg = true;\n        }\n\n        let x = select(this).attr(\"x\");\n        x = x ? parseFloat(x) * transform.scale : 0;\n        transform.x += x;\n        let y = select(this).attr(\"y\");\n        y = y ? parseFloat(y) * transform.scale : 0;\n        transform.y += y;\n        transform.clip = {\n          height: parseFloat(select(this).attr(\"height\") || select(this).style(\"height\")),\n          width: parseFloat(select(this).attr(\"width\") || select(this).style(\"width\")),\n          x, y\n        };\n      }\n      else {\n        const x = select(this).attr(\"x\");\n        if (x) transform.x += parseFloat(x) * transform.scale;\n        const y = select(this).attr(\"y\");\n        if (y) transform.y += parseFloat(y) * transform.scale;\n      }\n\n    }\n\n    if (!tag.length) {\n      const test = (this.wholeText || \"\").replace(/\\s/g, \"\");\n      if (test.length) {\n\n        const text = this.nodeValue\n          .replace(/^\\s*/, \"\")\n          .replace(/^\\n/, \"\")\n          .replace(/^\\s*/, \"\")\n          .replace(/\\n$/, \"\")\n          .replace(/\\s*$/, \"\")\n          .replace(/\\n$/, \"\");\n\n        layers.push({type: \"text\", style: this.parentNode, value: text, x: transform.x, y: transform.y});\n\n      }\n    }\n    else if (tag === \"text\") {\n      const elem = this.cloneNode(true);\n      select(elem).call(svgPresets);\n      layers.push(Object.assign({}, transform, {type: \"svg\", value: elem}));\n    }\n    else if ([\"image\", \"img\"].includes(tag)) {\n\n      const url = select(this).attr(\"href\") || select(this).attr(\"xlink:href\");\n\n      if (url.length) {\n\n        const h = parseFloat(select(this).attr(\"height\")) * transform.scale,\n              w = parseFloat(select(this).attr(\"width\")) * transform.scale;\n\n        const data = {\n          clip: transform.clip,\n          height: h,\n          loaded: false,\n          type: \"img\",\n          width: w,\n          x: transform.x,\n          y: transform.y\n        };\n        layers.push(data);\n\n        const img = new Image();\n        img.crossOrigin = \"Anonymous\";\n        img.onload = function() {\n\n          const canvas2 = document.createElement(\"canvas\");\n          const ctx2 = canvas2.getContext(\"2d\");\n          canvas2.height = h * ratio;\n          canvas2.width = w * ratio;\n          ctx2.drawImage(this, 0, 0, w * ratio, h * ratio);\n          const himg = document.createElement(\"img\");\n          himg.src = canvas2.toDataURL(\"image/png\");\n\n          data.value = himg;\n          data.loaded = true;\n\n        };\n        img.src = url;\n\n      }\n\n    }\n    else if (![\"svg\", \"g\", \"text\"].includes(tag) && !select(this).selectAll(\"svg\").size()) {\n\n      const s = options.scale * ratio;\n\n      const data = {\n        height: Math.floor(height + options.padding * 2 + offsetY),\n        loaded: false,\n        type: \"html\",\n        width: Math.floor(width + options.padding * 2 + offsetX),\n        x: Math.floor(layerX - offsetX),\n        y: Math.floor(layerY - offsetY)\n      };\n\n      const tempCanvas = document.createElement(\"canvas\");\n      tempCanvas.width = data.width * s;\n      tempCanvas.height = data.height * s;\n      tempCanvas.style.width = `${data.width * s}px`;\n      tempCanvas.style.height = `${data.height * s}px`;\n\n      const tempContext = tempCanvas.getContext(\"2d\");\n      tempContext.scale(s, s);\n\n      layers.push(data);\n\n      html2canvas(this, {\n        allowTaint: true,\n        canvas: tempCanvas,\n        letterRendering: true\n      }).then(c => {\n        data.value = c;\n        data.loaded = true;\n      });\n\n    }\n    else if (tag !== \"svg\" && this.childNodes.length > 0 && !select(this).selectAll(\"image, img, svg\").size()) {\n\n      const elem = this.cloneNode(true);\n      select(elem).selectAll(\"*\").each(function() {\n        select(this).call(svgPresets);\n        if (select(this).attr(\"opacity\") === \"0\") this.parentNode.removeChild(this);\n      });\n\n      layers.push(Object.assign({}, transform, {type: \"svg\", value: elem, tag}));\n\n    }\n    else if (this.childNodes.length > 0) {\n      checkChildren(this, transform);\n    }\n    else { // catches all SVG shapes\n\n      const elem = this.cloneNode(true);\n      select(elem).selectAll(\"*\").each(function() {\n        if (select(this).attr(\"opacity\") === \"0\") this.parentNode.removeChild(this);\n      });\n\n      if (tag === \"line\") {\n        select(elem).attr(\"x1\", parseFloat(select(elem).attr(\"x1\")) + transform.x);\n        select(elem).attr(\"x2\", parseFloat(select(elem).attr(\"x2\")) + transform.x);\n        select(elem).attr(\"y1\", parseFloat(select(elem).attr(\"y1\")) + transform.y);\n        select(elem).attr(\"y2\", parseFloat(select(elem).attr(\"y2\")) + transform.y);\n      }\n      else if (tag === \"path\") {\n        const [scale, x, y] = parseTransform(elem);\n        if (select(elem).attr(\"transform\")) select(elem).attr(\"transform\", `scale(${scale})translate(${x + transform.x},${y + transform.y})`);\n      }\n      select(elem).call(svgPresets);\n\n      const fill = select(elem).attr(\"fill\");\n      const defFill = fill && fill.indexOf(\"url\") === 0;\n      // if (defFill) select(elem).attr(\"fill-opacity\", 0);\n\n      layers.push(Object.assign({}, transform, {type: \"svg\", value: elem, tag}));\n      if (defFill) {\n        const def = select(fill.slice(4, -1)).node().cloneNode(true);\n        const defTag = (def.tagName || \"\").toLowerCase();\n        if (defTag === \"pattern\") {\n\n          const [scale, x, y] = parseTransform(elem);\n          transform.scale *= scale;\n          transform.x += x;\n          transform.y += y;\n          checkChildren(def, transform);\n\n        }\n      }\n\n    }\n\n  }\n\n  function checkChildren(e, trans) {\n    selectAll(e.childNodes).each(function() {\n      checkRender.bind(this)(trans);\n    });\n  }\n\n  for (let i = 0; i < elem.length; i++) {\n\n    let e = elem[i],\n        options = {scale: 1, x: 0, y: 0, svg: false};\n\n    if (e.constructor === Object) {\n      options = Object.assign(options, e);\n      e = e.element;\n    }\n    layerX = options.x;\n    layerY = options.y;\n    checkRender.bind(e)(options);\n\n  }\n\n  function checkStatus() {\n\n    let allDone = true;\n    for (let i = 0; i < layers.length; i++) {\n      if (layers[i].loaded === false) {\n        allDone = false;\n        break;\n      }\n    }\n\n    if (allDone) finish();\n    else setTimeout(checkStatus, 500);\n\n  }\n\n  // Wait for all images to load\n  checkStatus();\n\n  function finish() {\n\n    for (let i = 0; i < layers.length; i++) {\n\n      const layer = layers[i];\n      const clip = layer.clip || {height, width, x: 0, y: 0};\n\n      switch (layer.type) {\n\n        case \"img\":\n          context.save();\n          context.beginPath();\n          context.translate(options.padding + clip.x, options.padding + clip.y);\n          context.rect(0, 0, clip.width, clip.height);\n          context.clip();\n          context.drawImage(layer.value, layer.x + clip.x, layer.y + clip.y, layer.width, layer.height);\n          context.restore();\n          break;\n\n        case \"html\":\n          context.save();\n          context.beginPath();\n          context.translate(options.padding, options.padding);\n          context.drawImage(layer.value, layer.x, layer.y, layer.width, layer.height);\n          context.restore();\n          break;\n\n        case \"text\":\n\n          const parent = select(layer.style);\n          const title = layer.value\n            .replace(/&/g, \"&amp;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#039;\");\n\n          const fC = parent.style(\"color\"),\n                fS = parent.style(\"font-size\");\n\n          let fF = parent.style(\"font-family\").split(\",\")[0];\n\n          if (fF.indexOf(\"'\") !== 0) fF = `'${fF}'`;\n          const text = `<text stroke='none' dy='${fS}' fill='${fC}' font-family=${fF} font-size='${fS}'>${title}</text>`;\n\n          context.save();\n          context.translate(options.padding, options.padding);\n          canvg(canvas, text, Object.assign({}, canvgOptions, {offsetX: layer.x, offsetY: layer.y}));\n          context.restore();\n\n          break;\n\n        case \"svg\":\n          const outer = IE ? (new XMLSerializer()).serializeToString(layer.value) : layer.value.outerHTML;\n          context.save();\n          context.translate(options.padding + clip.x + layer.x, options.padding + clip.y + layer.y);\n          context.rect(0, 0, clip.width, clip.height);\n          context.clip();\n          canvg(canvas, outer, Object.assign({}, canvgOptions, {offsetX: layer.x + clip.x, offsetY: layer.y + clip.y}));\n          context.restore();\n          break;\n\n        default:\n          console.warn(\"uncaught\", layer);\n          break;\n\n      }\n\n    }\n\n    options.callback(canvas);\n\n  }\n\n}\n","import \"canvas-toBlob\";\nimport {saveAs} from \"file-saver\";\n// import JsPDF from \"jspdf\";\n\nimport dom2canvas from \"./dom2canvas\";\n\nconst defaultOptions = {\n  filename: \"download\",\n  type: \"png\"\n};\n\n/**\n    @function saveElement\n    @desc Downloads an HTML Element as a bitmap PNG image.\n    @param {HTMLElement|Array} elem A single element or array of elements to be saved to one file.\n    @param {Object} [options] Additional options to specify.\n    @param {String} [options.filename = \"download\"] Filename for the downloaded file, without the extension.\n    @param {String} [options.type = \"png\"] File type of the saved document. Accepted values are `\"png\"` and `\"jpg\"`.\n    @param {Object} [renderOptions] Custom options to be passed to the dom2canvas function.\n*/\nexport default function(elem, options = {}, renderOptions = {}) {\n\n  if (!elem) return;\n  options = Object.assign({}, defaultOptions, options);\n\n  const IE = new RegExp(/(MSIE|Trident\\/|Edge\\/)/i).test(navigator.userAgent);\n\n  if (!(elem instanceof Array) && options.type === \"svg\") {\n    const outer = IE ? (new XMLSerializer()).serializeToString(elem) : elem.outerHTML;\n    saveAs(new Blob([outer], {type: \"application/svg+xml\"}), `${options.filename}.svg`);\n  }\n\n  dom2canvas(elem, Object.assign({}, renderOptions, {callback: canvas => {\n\n    if (renderOptions.callback) renderOptions.callback(canvas);\n\n    if ([\"jpg\", \"png\"].includes(options.type)) {\n      canvas.toBlob(blob => saveAs(blob, `${options.filename}.${options.type}`));\n    }\n    // else if (options.type === \"pdf\") {\n\n    //   const outputHeight = 11,\n    //         outputWidth = 8.5;\n\n    //   const aspect = canvas.width / canvas.height,\n    //         orientation = aspect > 1 ? \"landscape\" : \"portrait\";\n\n    //   const pdf = new JsPDF({\n    //     orientation,\n    //     unit: \"in\",\n    //     format: [outputWidth, outputHeight]\n    //   });\n\n    //   let h = orientation === \"landscape\" ? outputWidth : outputHeight,\n    //       left,\n    //       top,\n    //       w = orientation === \"landscape\" ? outputHeight : outputWidth;\n\n    //   const margin = 0.5;\n\n    //   if (aspect < w / h) {\n    //     h -= margin * 2;\n    //     const tempWidth = h * aspect;\n    //     top = margin;\n    //     left = (w - tempWidth) / 2;\n    //     w = tempWidth;\n    //   }\n    //   else {\n    //     w -= margin * 2;\n    //     const tempHeight = w / aspect;\n    //     left = margin;\n    //     top = (h - tempHeight) / 2;\n    //     h = tempHeight;\n    //   }\n\n    //   pdf.addImage(canvas, \"canvas\", left, top, w, h);\n    //   pdf.save(options.filename);\n\n    // }\n\n  }}));\n\n}\n"],"names":["const","select","let","tag","x","y","data","elem","scale","selectAll","options","defaultOptions","saveAs"],"mappings":"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"}