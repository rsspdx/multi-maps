{"version":3,"file":"Radio.js","sources":["../../src/Radio.js"],"sourcesContent":["/**\n    @external BaseClass\n    @see https://github.com/d3plus/d3plus-common#BaseClass\n*/\nimport {select} from \"d3-selection\";\nimport {accessor, BaseClass, constant, stylize} from \"d3plus-common\";\n\n/**\n    @class Radio\n    @extends external:BaseClass\n    @desc Creates a set of HTML radio input elements.\n*/\nexport default class Radio extends BaseClass {\n\n  /**\n      @memberof Radio\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n\n    super();\n\n    this._labelStyle = {\n      \"font-family\": \"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif\",\n      \"font-size\": \"14px\",\n      \"padding-right\": \"5px\"\n    };\n    this._legendStyle = {\n      \"font-family\": \"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif\",\n      \"font-size\": \"14px\",\n      \"padding-right\": \"5px\"\n    };\n    this._options = [];\n    this._radioStyle = {\n      \"margin-right\": \"10px\"\n    };\n    this._text = accessor(\"text\");\n    this._value = accessor(\"value\");\n\n  }\n\n  /**\n      @memberof Radio\n      @desc Renders the element to the page.\n      @chainable\n  */\n  render() {\n\n    if (this._container === void 0) this.container(select(\"body\").append(\"div\").node());\n    const that = this;\n\n    let container = this._container.selectAll(`div#d3plus-Form-${this._uuid}`).data([0]);\n    const svg = this._container.node().tagName.toLowerCase() === \"foreignobject\";\n\n    container = container.enter().append(svg ? \"xhtml:div\" : \"div\")\n        .attr(\"id\", `d3plus-Form-${this._uuid}`)\n        .attr(\"class\", \"d3plus-Form d3plus-Form-Radio\")\n      .merge(container);\n\n    let radios = container.selectAll(\"label\")\n      .data(this._options, (d, i) => this._value(d, i));\n\n    radios.exit()\n      .each(function() {\n        select(this.nextSibling).remove();\n      })\n      .remove();\n\n    radios = radios.enter().append(\"label\")\n        .attr(\"class\", \"d3plus-Label\")\n        .attr(\"for\", (d, i) => `${this._uuid}-${this._value(d, i)}`)\n        .each(function(d, i) {\n          const input = document.createElement(\"input\");\n          input.setAttribute(\"type\", \"radio\");\n          input.setAttribute(\"name\", `d3plus-Radio-${that._uuid}`);\n          input.setAttribute(\"id\", `${that._uuid}-${that._value(d, i)}`);\n          input.setAttribute(\"value\", that._value(d, i));\n          this.parentNode.insertBefore(input, this.nextSibling);\n        })\n      .merge(radios)\n        .call(stylize, this._labelStyle)\n        .html((d, i) => this._text(d, i))\n        .each(function(d, i) {\n          const checked = that._checked === void 0 ? !i : `${that._value(d, i)}` === `${that._checked}`;\n          select(this)\n            .classed(\"active\", checked)\n            .style(\"cursor\", checked ? \"default\" : \"pointer\");\n          const input = select(this.nextSibling)\n            .property(\"checked\", checked)\n            .call(stylize, that._radioStyle)\n            .style(\"cursor\", checked ? \"default\" : \"pointer\")\n            .on(\"change.d3plus\", function() {\n              that.checked(this.value);\n              radios.each(function(d, i) {\n                const checked = `${that._value(d, i)}` === `${that._checked}`;\n                select(this).classed(\"active\", checked).style(\"cursor\", checked ? \"default\" : \"pointer\");\n                select(this.nextSibling).style(\"cursor\", checked ? \"default\" : \"pointer\");\n              });\n            });\n\n          for (const event in that._on) {\n            if ({}.hasOwnProperty.call(that._on, event)) input.on(event, that._on[event]);\n          }\n\n        });\n\n    const legend = container.selectAll(`legend#d3plus-Legend-${this._uuid}`)\n      .data(this._legend ? [0] : []);\n    legend.exit().remove();\n    legend.enter().insert(\"legend\", \".d3plus-Label\")\n        .attr(\"id\", `d3plus-Legend-${this._uuid}`)\n        .attr(\"class\", \"d3plus-Legend\")\n      .merge(legend)\n        .call(stylize, this._legendStyle)\n        .html(this._legend);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Radio\n      @desc Defines the checked input.\n      @param {Function} [*value*]\n      @chainable\n  */\n  checked(_) {\n    return arguments.length ? (this._checked = _, this) : this._checked;\n  }\n\n  /**\n      @memberof Radio\n      @desc If *selector* is specified, sets the SVG container element to the specified d3 selector or DOM element and returns the current class instance. If *selector* is not specified, returns the current SVG container element, which is `undefined` by default.\n      @param {String|HTMLElement} [*selector*]\n      @chainable\n  */\n  container(_) {\n    return arguments.length ? (this._container = select(_), this) : this._container;\n  }\n\n  /**\n      @memberof Radio\n      @desc Sets the css styles for the <label> element.\n      @param {Object} [*value*]\n      @chainable\n  */\n  labelStyle(_) {\n    return arguments.length ? (this._labelStyle = _, this) : this._labelStyle;\n  }\n\n  /**\n      @memberof Radio\n      @desc Creates a <legend> tag for the <select> element.\n      @param {String} [*value*]\n      @chainable\n  */\n  legend(_) {\n    return arguments.length ? (this._legend = _, this) : this._legend;\n  }\n\n  /**\n      @memberof Radio\n      @desc Sets the css styles for the <legend> element.\n      @param {Object} [*value*]\n      @chainable\n  */\n  legendStyle(_) {\n    return arguments.length ? (this._legendStyle = _, this) : this._legendStyle;\n  }\n\n  /**\n      @memberof Radio\n      @desc Defines the array of values to be used as <option> tags inside of the <select> element. If no value is passed, the current array is returned.\n      @param {Array} [*value* = []]\n      @chainable\n  */\n  options(_) {\n    return arguments.length ? (this._options = _, this) : this._options;\n  }\n\n  /**\n      @memberof Radio\n      @desc Sets the css styles for the <input type=\"radio\"> elements.\n      @param {Object} [*value*]\n      @chainable\n  */\n  radioStyle(_) {\n    return arguments.length ? (this._radioStyle = _, this) : this._radioStyle;\n  }\n\n  /**\n      @memberof Radio\n      @desc Sets the inner text for each <option> element.\n      @param {Function|String} [*value* = function(d) { return d.text; }]\n      @chainable\n  */\n  text(_) {\n    return arguments.length ? (this._text = typeof _ === \"function\" ? _ : constant(_), this) : this._text;\n  }\n\n  /**\n      @memberof Radio\n      @desc Sets the value for each <option> element.\n      @param {Function} [*value* = function(d) { return d.value; }]\n      @chainable\n  */\n  value(_) {\n    return arguments.length ? (this._value = _, this) : this._value;\n  }\n\n}\n"],"names":["super","const","let","this"],"mappings":"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"}