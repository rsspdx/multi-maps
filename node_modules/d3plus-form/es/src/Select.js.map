{"version":3,"file":"Select.js","sources":["../../src/Select.js"],"sourcesContent":["/**\n    @external BaseClass\n    @see https://github.com/d3plus/d3plus-common#BaseClass\n*/\nimport {select} from \"d3-selection\";\nimport {accessor, BaseClass, constant, stylize} from \"d3plus-common\";\n\n/**\n    @class Select\n    @extends external:BaseClass\n    @desc Creates an HTML select element.\n*/\nexport default class Select extends BaseClass {\n\n  /**\n      @memberof Select\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n\n    super();\n\n    this._labelStyle = {\n      \"font-family\": \"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif\",\n      \"font-size\": \"14px\",\n      \"margin-right\": \"5px\"\n    };\n    this._options = [];\n    this._optionStyle = {\n      \"font-family\": \"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif\",\n      \"font-size\": \"14px\"\n    };\n    this._selectStyle = {\n      \"background\": \"#fafafa\",\n      \"border\": \"1px solid #ccc\",\n      \"border-radius\": \"0\",\n      \"font-family\": \"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif\",\n      \"font-size\": \"14px\",\n      \"outline\": \"0\",\n      \"padding\": \"3px 5px 4px\"\n    };\n    this._text = accessor(\"text\");\n    this._value = accessor(\"value\");\n\n  }\n\n  /**\n      @memberof Select\n      @desc Renders the element to the page.\n      @chainable\n  */\n  render() {\n\n    if (this._container === void 0) this.container(select(\"body\").append(\"div\").node());\n    const that = this;\n\n    let container = this._container.selectAll(`div#d3plus-Form-${this._uuid}`).data([0]);\n    const svg = this._container.node().tagName.toLowerCase() === \"foreignobject\";\n\n    container = container.enter().append(svg ? \"xhtml:div\" : \"div\")\n        .attr(\"id\", `d3plus-Form-${this._uuid}`)\n        .attr(\"class\", \"d3plus-Form d3plus-Form-Select\")\n      .merge(container);\n\n    let select = container.selectAll(`select#d3plus-Select-${this._uuid}`).data([0]);\n    select = select.enter().append(\"select\")\n        .attr(\"id\", `d3plus-Select-${this._uuid}`)\n        .attr(\"class\", \"d3plus-Select\")\n      .merge(select)\n        .call(stylize, this._selectStyle)\n        .on(\"change.d3plus\", function() {\n          that.selected(this.value);\n        });\n\n    for (const event in this._on) {\n      if ({}.hasOwnProperty.call(this._on, event)) select.on(event, this._on[event]);\n    }\n\n    const options = select.selectAll(\"option\")\n      .data(this._options, (d, i) => this._value(d, i));\n\n    options.exit().remove();\n\n    options.enter().append(\"option\")\n        .attr(\"class\", \"d3plus-Option\")\n      .merge(options)\n        .call(stylize, this._optionStyle)\n        .attr(\"value\", (d, i) => this._value(d, i))\n        .html((d, i) => this._text(d, i))\n        .property(\"selected\", (d, i) => this._selected === void 0 ? !i : `${this._value(d, i)}` === `${this._selected}`);\n\n    const label = container.selectAll(`label#d3plus-Label-${this._uuid}`)\n      .data(this._label ? [0] : []);\n    label.exit().remove();\n    label.enter().insert(\"label\", `#d3plus-Select-${this._uuid}`)\n        .attr(\"id\", `d3plus-Label-${this._uuid}`)\n        .attr(\"class\", \"d3plus-Label\")\n        .attr(\"for\", `d3plus-Select-${this._uuid}`)\n      .merge(label)\n        .call(stylize, this._labelStyle)\n        .html(this._label);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Select\n      @desc If *selector* is specified, sets the SVG container element to the specified d3 selector or DOM element and returns the current class instance. If *selector* is not specified, returns the current SVG container element, which is `undefined` by default.\n      @param {String|HTMLElement} [*selector*]\n      @chainable\n  */\n  container(_) {\n    return arguments.length ? (this._container = select(_), this) : this._container;\n  }\n\n  /**\n      @memberof Select\n      @desc Creates a <label> tag for the <select> element.\n      @param {String} [*value*]\n      @chainable\n  */\n  label(_) {\n    return arguments.length ? (this._label = _, this) : this._label;\n  }\n\n  /**\n      @memberof Select\n      @desc Sets the css styles for the <label> element.\n      @param {Object} [*value*]\n      @chainable\n  */\n  labelStyle(_) {\n    return arguments.length ? (this._labelStyle = _, this) : this._labelStyle;\n  }\n\n  /**\n      @memberof Select\n      @desc Defines the array of values to be used as <option> tags inside of the <select> element. If no value is passed, the current array is returned.\n      @param {Array} [*value* = []]\n      @chainable\n  */\n  options(_) {\n    return arguments.length ? (this._options = _, this) : this._options;\n  }\n\n  /**\n      @memberof Select\n      @desc Sets the css styles for the <option> elements.\n      @param {Object} [*value*]\n      @chainable\n  */\n  optionStyle(_) {\n    return arguments.length ? (this._optionStyle = _, this) : this._optionStyle;\n  }\n\n  /**\n      @memberof Select\n      @desc Defines the selected option.\n      @param {Function} [*value*]\n      @chainable\n  */\n  selected(_) {\n    return arguments.length ? (this._selected = _, this) : this._selected;\n  }\n\n  /**\n      @memberof Select\n      @desc Sets the css styles for the <select> element.\n      @param {Object} [*value*]\n      @chainable\n  */\n  selectStyle(_) {\n    return arguments.length ? (this._selectStyle = _, this) : this._selectStyle;\n  }\n\n  /**\n      @memberof Select\n      @desc Sets the inner text for each <option> element.\n      @param {Function|String} [*value* = function(d) { return d.text; }]\n      @chainable\n  */\n  text(_) {\n    return arguments.length ? (this._text = typeof _ === \"function\" ? _ : constant(_), this) : this._text;\n  }\n\n  /**\n      @memberof Select\n      @desc Sets the value for each <option> element.\n      @param {Function} [*value* = function(d) { return d.value; }]\n      @chainable\n  */\n  value(_) {\n    return arguments.length ? (this._value = _, this) : this._value;\n  }\n\n}\n"],"names":["super","const","let","this"],"mappings":"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"}