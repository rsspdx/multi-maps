{"version":3,"file":"d3plus-format.js","sources":["../src/abbreviate.js"],"sourcesContent":["import {format} from \"d3-format\";\n\n/**\n    @function formatAbbreviate\n    @desc Formats a number to an appropriate number of decimal places and rounding, adding suffixes if applicable (ie. `1200000` to `\"1.2M\"`).\n    @param {Number} n The number to be formatted.\n    @returns {String}\n*/\nexport default function(n) {\n  if (typeof n !== \"number\") return \"N/A\";\n  const length = n.toString().split(\".\")[0].replace(\"-\", \"\").length;\n  let val;\n  if (n === 0) val = \"0\";\n  else if (length >= 3) {\n    const f = format(\".3s\")(n)\n      .replace(\"G\", \"B\")\n      .replace(\"T\", \"t\")\n      .replace(\"P\", \"q\")\n      .replace(\"E\", \"Q\");\n    const num = f.slice(0, -1);\n    const char = f.slice(f.length - 1);\n    val = `${parseFloat(num)}${char}`;\n  }\n  else if (length === 3) val = format(\",f\")(n);\n  else if (n < 1 && n > -1) val = format(\".2g\")(n);\n  else val = format(\".3g\")(n);\n\n  return val\n    .replace(/(\\.[1-9]*)[0]*$/g, \"$1\") // removes any trailing zeros\n    .replace(/[.]$/g, \"\"); // removes any trailing decimal point\n}\n"],"names":["const","let","format"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,EAAe,oBAAS,CAAC,EAAE;IACzB,IAAI,OAAO,CAAC,KAAK,QAAQ,IAAE,OAAO,KAAK,GAAC;IACxCA,IAAM,MAAM,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC;IAClEC,IAAI,GAAG,CAAC;IACR,IAAI,CAAC,KAAK,CAAC,IAAE,GAAG,GAAG,GAAG,GAAC;SAClB,IAAI,MAAM,IAAI,CAAC,EAAE;MACpBD,IAAM,CAAC,GAAGE,eAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACvB,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;SACjB,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;SACjB,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;SACjB,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;MACrBF,IAAM,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MAC3BA,IAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;MACnC,GAAG,GAAG,MAAG,UAAU,CAAC,GAAG,CAAC,IAAG,IAAI,CAAG;KACnC;SACI,IAAI,MAAM,KAAK,CAAC,IAAE,GAAG,GAAGE,eAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAC;SACxC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAE,GAAG,GAAGA,eAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC;WAC5C,GAAG,GAAGA,eAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAC;;IAE5B,OAAO,GAAG;OACP,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC;OACjC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;GACzB;;;;;;;;;;;;"}