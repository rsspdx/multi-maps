{"version":3,"file":"Bar.js","sources":["../../../src/Shape/Bar.js"],"sourcesContent":["import {accessor, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\n\n/**\n    @class Bar\n    @extends Shape\n    @desc Creates SVG areas based on an array of data.\n*/\nexport default class Bar extends Shape {\n\n  /**\n      @memberof Bar\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n\n    super(\"rect\");\n\n    this._name = \"Bar\";\n    this._height = constant(10);\n    this._labelBounds = (d, i, s) => ({\n      width: s.width,\n      height: s.height,\n      x: this._x1 !== null ? this._getX(d, i) : -s.width / 2,\n      y: this._x1 === null ? this._getY(d, i) : -s.height / 2\n    });\n    this._width = constant(10);\n    this._x = accessor(\"x\");\n    this._x0 = accessor(\"x\");\n    this._x1 = null;\n    this._y = constant(0);\n    this._y0 = constant(0);\n    this._y1 = accessor(\"y\");\n\n  }\n\n  /**\n      @memberof Bar\n      @desc Draws the bars.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"width\", (d, i) => this._x1 === null ? this._getWidth(d, i) : 0)\n      .attr(\"height\", (d, i) => this._x1 !== null ? this._getHeight(d, i) : 0)\n      .attr(\"x\", (d, i) => this._x1 === null ? -this._getWidth(d, i) / 2 : 0)\n      .attr(\"y\", (d, i) => this._x1 !== null ? -this._getHeight(d, i) / 2 : 0)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .call(this._applyPosition.bind(this));\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .call(this._applyPosition.bind(this));\n\n    this._exit.transition(this._transition)\n      .attr(\"width\", (d, i) => this._x1 === null ? this._getWidth(d, i) : 0)\n      .attr(\"height\", (d, i) => this._x1 !== null ? this._getHeight(d, i) : 0)\n      .attr(\"x\", (d, i) => this._x1 === null ? -this._getWidth(d, i) / 2 : 0)\n      .attr(\"y\", (d, i) => this._x1 !== null ? -this._getHeight(d, i) / 2 : 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Bar\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {height: this._getHeight(d, i), width: this._getWidth(d, i)};\n  }\n\n  /**\n      @memberof Bar\n      @desc Provides the default positioning to the <rect> elements.\n      @param {D3Selection} *elem*\n      @private\n  */\n  _applyPosition(elem) {\n    elem\n      .attr(\"width\", (d, i) => this._getWidth(d, i))\n      .attr(\"height\", (d, i) => this._getHeight(d, i))\n      .attr(\"x\", (d, i) => this._x1 !== null ? this._getX(d, i) : -this._getWidth(d, i) / 2)\n      .attr(\"y\", (d, i) => this._x1 === null ? this._getY(d, i) : -this._getHeight(d, i) / 2);\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the height of the <rect> by assessing the x and y properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getHeight(d, i) {\n    if (this._x1 !== null) return this._height(d, i);\n    return Math.abs(this._y1(d, i) - this._y(d, i));\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the width of the <rect> by assessing the x and y properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getWidth(d, i) {\n    if (this._x1 === null) return this._width(d, i);\n    return Math.abs(this._x1(d, i) - this._x(d, i));\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the x of the <rect> by assessing the x and width properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getX(d, i) {\n    const w = this._x1 === null ? this._x(d, i) : this._x1(d, i) - this._x(d, i);\n    if (w < 0) return w;\n    else return 0;\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the y of the <rect> by assessing the y and height properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getY(d, i) {\n    const h = this._x1 !== null ? this._y(d, i) : this._y1(d, i) - this._y(d, i);\n    if (h < 0) return h;\n    else return 0;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the height accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.height;\n}\n  */\n  height(_) {\n    return arguments.length ? (this._height = typeof _ === \"function\" ? _ : constant(_), this) : this._height;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the width accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.width;\n}\n  */\n  width(_) {\n    return arguments.length ? (this._width = typeof _ === \"function\" ? _ : constant(_), this) : this._width;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the x0 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  x0(_) {\n    if (!arguments.length) return this._x0;\n    this._x0 = typeof _ === \"function\" ? _ : constant(_);\n    this._x = this._x0;\n    return this;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the x1 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number|null} [*value*]\n      @chainable\n  */\n  x1(_) {\n    return arguments.length ? (this._x1 = typeof _ === \"function\" || _ === null ? _ : constant(_), this) : this._x1;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the y0 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  y0(_) {\n    if (!arguments.length) return this._y0;\n    this._y0 = typeof _ === \"function\" ? _ : constant(_);\n    this._y = this._y0;\n    return this;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the y1 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number|null} [*value*]\n      @chainable\n  */\n  y1(_) {\n    return arguments.length ? (this._y1 = typeof _ === \"function\" || _ === null ? _ : constant(_), this) : this._y1;\n  }\n\n}\n"],"names":["super","this","const"],"mappings":"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"}