{"version":3,"file":"Box.js","sources":["../../../src/Shape/Box.js"],"sourcesContent":["import {max, min, quantile} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport {select} from \"d3-selection\";\n\nimport {accessor, assign, BaseClass, configPrep, constant, merge, elem} from \"d3plus-common\";\n\nimport Circle from \"./Circle\";\nimport Rect from \"./Rect\";\nimport Whisker from \"./Whisker\";\n\nconst shapes = {Circle, Rect};\n\n/**\n    @class Box\n    @extends BaseClass\n    @desc Creates SVG box based on an array of data.\n*/\nexport default class Box extends BaseClass {\n\n  /**\n      @memberof Box\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from BaseClass.\n      @private\n  */\n  constructor() {\n\n    super();\n\n    this._medianConfig = {\n      fill: constant(\"black\")\n    };\n    this._orient = accessor(\"orient\", \"vertical\");\n    this._outlier = accessor(\"outlier\", \"Circle\");\n    this._outlierConfig = {\n      Circle: {\n        r: accessor(\"r\", 5)\n      },\n      Rect: {\n        height: (d, i) => this._orient(d, i) === \"vertical\" ? 5 : 20,\n        width: (d, i) => this._orient(d, i) === \"vertical\" ? 20 : 5\n      }\n    };\n    this._rectConfig = {\n      fill: constant(\"white\"),\n      stroke: constant(\"black\"),\n      strokeWidth: constant(1)\n    };\n    this._rectWidth = constant(50);\n    this._whiskerConfig = {};\n    this._whiskerMode = [\"tukey\", \"tukey\"];\n    this._x = accessor(\"x\", 250);\n    this._y = accessor(\"y\", 250);\n\n  }\n\n  /**\n      @memberof Box\n      @desc Draws the Box.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render() {\n\n    if (this._select === void 0) {\n      this.select(select(\"body\").append(\"svg\")\n        .style(\"width\", `${window.innerWidth}px`)\n        .style(\"height\", `${window.innerHeight}px`)\n        .style(\"display\", \"block\").node());\n    }\n\n    const outlierData = [];\n\n    const filteredData = nest()\n      .key((d, i) => this._orient(d, i) === \"vertical\" ? this._x(d, i) : this._y(d, i))\n      .entries(this._data)\n      .map(d => {\n        d.data = merge(d.values);\n        d.i = this._data.indexOf(d.values[0]);\n        d.orient = this._orient(d.data, d.i);\n        const values = d.values.map(d.orient === \"vertical\" ? this._y : this._x);\n        values.sort((a, b) => a - b);\n\n        d.first = quantile(values, 0.25);\n        d.median = quantile(values, 0.50);\n        d.third = quantile(values, 0.75);\n\n        const mode = this._whiskerMode;\n\n        if (mode[0] === \"tukey\") {\n          d.lowerLimit = d.first - (d.third - d.first) * 1.5;\n          if (d.lowerLimit < min(values)) d.lowerLimit = min(values);\n        }\n        else if (mode[0] === \"extent\") d.lowerLimit = min(values);\n        else if (typeof mode[0] === \"number\") d.lowerLimit = quantile(values, mode[0]);\n\n        if (mode[1] === \"tukey\") {\n          d.upperLimit = d.third + (d.third - d.first) * 1.5;\n          if (d.upperLimit > max(values)) d.upperLimit = max(values);\n        }\n        else if (mode[1] === \"extent\") d.upperLimit = max(values);\n        else if (typeof mode[1] === \"number\") d.upperLimit = quantile(values, mode[1]);\n\n        const rectLength = d.third - d.first;\n\n        // Compute values for vertical orientation.\n        if (d.orient === \"vertical\") {\n          d.height = rectLength;\n          d.width = this._rectWidth(d.data, d.i);\n          d.x = this._x(d.data, d.i);\n          d.y = d.first + rectLength / 2;\n        }\n        else if (d.orient === \"horizontal\") {\n        // Compute values for horizontal orientation.\n          d.height = this._rectWidth(d.data, d.i);\n          d.width = rectLength;\n          d.x = d.first + rectLength / 2;\n          d.y = this._y(d.data, d.i);\n        }\n\n        // Compute data for outliers.\n        d.values.forEach((eachValue, index) => {\n          const value = d.orient === \"vertical\" ? this._y(eachValue, index) : this._x(eachValue, index);\n\n          if (value < d.lowerLimit || value > d.upperLimit) {\n            const dataObj = {};\n            dataObj.__d3plus__ = true;\n            dataObj.data = eachValue;\n            dataObj.i = index;\n            dataObj.outlier = this._outlier(eachValue, index);\n\n            if (d.orient === \"vertical\") {\n              dataObj.x = d.x;\n              dataObj.y = value;\n              outlierData.push(dataObj);\n            }\n            else if (d.orient === \"horizontal\") {\n              dataObj.y = d.y;\n              dataObj.x = value;\n              outlierData.push(dataObj);\n            }\n          }\n\n        });\n\n        d.__d3plus__ = true;\n\n        return d;\n      });\n\n    // Draw box.\n    this._box = new Rect()\n      .data(filteredData)\n      .x(d => d.x)\n      .y(d => d.y)\n      .select(elem(\"g.d3plus-Box\", {parent: this._select}).node())\n      .config(configPrep.bind(this)(this._rectConfig, \"shape\"))\n      .render();\n\n    // Draw median.\n    this._median = new Rect()\n      .data(filteredData)\n      .x(d => d.orient === \"vertical\" ? d.x : d.median)\n      .y(d => d.orient === \"vertical\" ? d.median : d.y)\n      .height(d => d.orient === \"vertical\" ? 1 : d.height)\n      .width(d => d.orient === \"vertical\" ? d.width : 1)\n      .select(elem(\"g.d3plus-Box-Median\", {parent: this._select}).node())\n      .config(configPrep.bind(this)(this._medianConfig, \"shape\"))\n      .render();\n\n    // Draw 2 lines using Whisker class.\n    // Construct coordinates for whisker startpoints and push it to the whiskerData.\n    const whiskerData = [];\n    filteredData.forEach((d, i) => {\n      const x = d.x;\n      const y = d.y;\n      const topLength = d.first - d.lowerLimit;\n      const bottomLength = d.upperLimit - d.third;\n\n      if (d.orient === \"vertical\") {\n        const topY = y - d.height / 2;\n        const bottomY = y + d.height / 2;\n        whiskerData.push(\n          {__d3plus__: true, data: d, i, x, y: topY, length: topLength, orient: \"top\"},\n          {__d3plus__: true, data: d, i, x, y: bottomY, length: bottomLength, orient: \"bottom\"}\n        );\n      }\n      else if (d.orient === \"horizontal\") {\n        const topX = x + d.width / 2;\n        const bottomX = x - d.width / 2;\n        whiskerData.push(\n          {__d3plus__: true, data: d, i, x: topX, y, length: bottomLength, orient: \"right\"},\n          {__d3plus__: true, data: d, i, x: bottomX, y, length: topLength, orient: \"left\"}\n        );\n      }\n\n    });\n\n    // Draw whiskers.\n    this._whisker = new Whisker()\n      .data(whiskerData)\n      .select(elem(\"g.d3plus-Box-Whisker\", {parent: this._select}).node())\n      .config(configPrep.bind(this)(this._whiskerConfig, \"shape\"))\n      .render();\n\n    // Draw outliers.\n    this._whiskerEndpoint = [];\n    nest()\n      .key(d => d.outlier)\n      .entries(outlierData)\n      .forEach(shapeData => {\n        const shapeName = shapeData.key;\n        this._whiskerEndpoint.push(new shapes[shapeName]()\n          .data(shapeData.values)\n          .select(elem(`g.d3plus-Box-Outlier-${shapeName}`, {parent: this._select}).node())\n          .config(configPrep.bind(this)(this._outlierConfig, \"shape\", shapeName))\n          .render());\n      });\n\n    return this;\n  }\n\n  /**\n      @memberof Box\n      @desc Sets the highlight accessor to the Shape class's active function.\n      @param {Function} [*value*]\n      @chainable\n  */\n  active(_) {\n    if (this._box) this._box.active(_);\n    if (this._median) this._median.active(_);\n    if (this._whisker) this._whisker.active(_);\n    if (this._whiskerEndpoint) this._whiskerEndpoint.forEach(endPoint => endPoint.active(_));\n  }\n\n  /**\n      @memberof Box\n      @desc If *data* is specified, sets the data array to the specified array and returns the current class instance. If *data* is not specified, returns the current data array.\n      @param {Array} [*data* = []]\n      @chainable\n  */\n  data(_) {\n    return arguments.length ? (this._data = _, this) : this._data;\n  }\n\n  /**\n      @memberof Box\n      @desc Sets the highlight accessor to the Shape class's hover function.\n      @param {Function} [*value*]\n      @chainable\n  */\n  hover(_) {\n    if (this._box) this._box.hover(_);\n    if (this._median) this._median.hover(_);\n    if (this._whisker) this._whisker.hover(_);\n    if (this._whiskerEndpoint) this._whiskerEndpoint.forEach(endPoint => endPoint.hover(_));\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the config method for median and returns the current class instance.\n      @param {Object} [*value*]\n      @chainable\n  */\n  medianConfig(_) {\n    return arguments.length ? (this._medianConfig = assign(this._medianConfig, _), this) : this._medianConfig;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the orientation to the specified value. If *value* is not specified, returns the current orientation.\n      @param {Function|String} [*value* = \"vertical\"] Accepts \"vertical\" or \"horizontal\"\n      @chainable\n  */\n  orient(_) {\n    return arguments.length ? (this._orient = typeof _ === \"function\" ? _ : constant(_), this) : this._orient;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the outlier accessor to the specified function or string and returns the current class instance.\n      @param {Function|String}\n      @chainable\n  */\n  outlier(_) {\n    return arguments.length ? (this._outlier = typeof _ === \"function\" ? _ : constant(_), this) : this._outlier;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the config method for each outlier point and returns the current class instance.\n      @param {Object} [*value*]\n      @chainable\n  */\n  outlierConfig(_) {\n    return arguments.length ? (this._outlierConfig = assign(this._outlierConfig, _), this) : this._outlierConfig;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the config method for rect shape and returns the current class instance.\n      @param {Object} [*value*]\n      @chainable\n  */\n  rectConfig(_) {\n    return arguments.length ? (this._rectConfig = assign(this._rectConfig, _), this) : this._rectConfig;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the width accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.width;\n}\n  */\n  rectWidth(_) {\n    return arguments.length ? (this._rectWidth = typeof _ === \"function\" ? _ : constant(_), this) : this._rectWidth;\n  }\n\n  /**\n      @memberof Box\n      @desc If *selector* is specified, sets the SVG container element to the specified d3 selector or DOM element and returns the current class instance. If *selector* is not specified, returns the current SVG container element.\n      @param {String|HTMLElement} [*selector* = d3.select(\"body\").append(\"svg\")]\n      @chainable\n  */\n  select(_) {\n    return arguments.length ? (this._select = select(_), this) : this._select;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the config method for whisker and returns the current class instance.\n      @param {Object} [*value*]\n      @chainable\n  */\n  whiskerConfig(_) {\n    return arguments.length ? (this._whiskerConfig = assign(this._whiskerConfig, _), this) : this._whiskerConfig;\n  }\n\n  /**\n      @memberof Box\n      @desc Determines the value used for each whisker. Can be passed a single value to apply for both whiskers, or an Array of 2 values for the lower and upper whiskers (in that order). Accepted values are `\"tukey\"`, `\"extent\"`, or a Number representing a quantile.\n      @param {String|Number|String[]|Number[]} [*value* = \"tukey\"]\n      @chainable\n  */\n  whiskerMode(_) {\n    return arguments.length ? (this._whiskerMode = _ instanceof Array ? _ : [_, _], this) : this._whiskerMode;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the x axis to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.x;\n}\n  */\n  x(_) {\n    return arguments.length ? (this._x = typeof _ === \"function\" ? _ : accessor(_), this) : this._x;\n  }\n\n  /**\n      @memberof Box\n      @desc If *value* is specified, sets the y axis to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.y;\n}\n  */\n  y(_) {\n    return arguments.length ? (this._y = typeof _ === \"function\" ? _ : accessor(_), this) : this._y;\n  }\n\n}\n"],"names":["const","super","this"],"mappings":"AAAA,QAAQ,GAAG,EAAE,GAAG,EAAE,QAAQ,OAAO,UAAU,CAAC;AAC5C,QAAQ,IAAI,OAAO,eAAe,CAAC;AACnC,QAAQ,MAAM,OAAO,cAAc,CAAC;;AAEpC,QAAQ,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,OAAO,eAAe,CAAC;;AAE7F,OAAO,MAAM,MAAM,UAAU,CAAC;AAC9B,OAAO,IAAI,MAAM,QAAQ,CAAC;AAC1B,OAAO,OAAO,MAAM,WAAW,CAAC;;AAEhCA,GAAK,CAAC,MAAM,GAAG,SAAC,MAAM,QAAE,IAAI,CAAC,CAAC;;;;;;;AAO9B,AAAe,IAAM,GAAG,GAAkB;EAOxC,YAAW,GAAG;;AAAC;;IAEbC,cAAK,KAAC,CAAC,CAAC;;IAER,IAAI,CAAC,aAAa,GAAG;MACnB,IAAI,EAAE,QAAQ,CAAC,OAAO,CAAC;KACxB,CAAC;IACF,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;IAC9C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IAC9C,IAAI,CAAC,cAAc,GAAG;MACpB,MAAM,EAAE;QACN,CAAC,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;OACpB;MACD,IAAI,EAAE;QACJ,MAAM,WAAE,CAAC,CAAC,EAAE,CAAC,EAAE,SAAGC,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,KAAE;QAC5D,KAAK,WAAE,CAAC,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,UAAU,GAAG,EAAE,GAAG,IAAC;OAC5D;KACF,CAAC;IACF,IAAI,CAAC,WAAW,GAAG;MACjB,IAAI,EAAE,QAAQ,CAAC,OAAO,CAAC;MACvB,MAAM,EAAE,QAAQ,CAAC,OAAO,CAAC;MACzB,WAAW,EAAE,QAAQ,CAAC,CAAC,CAAC;KACzB,CAAC;IACF,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IAC/B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;IACzB,IAAI,CAAC,YAAY,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACvC,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IAC7B,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;;;;;kCAE9B;;;;;;;;gBAQD,yBAAM,GAAG;;AAAC;;IAER,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,EAAE;MAC3B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;SACrC,KAAK,CAAC,OAAO,EAAE,EAAG,MAAM,CAAC,WAAU,QAAI,CAAC;SACxC,KAAK,CAAC,QAAQ,EAAE,EAAG,MAAM,CAAC,YAAW,QAAI,CAAC;SAC1C,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;KACtC;;IAEDF,GAAK,CAAC,WAAW,GAAG,EAAE,CAAC;;IAEvBA,GAAK,CAAC,YAAY,GAAG,IAAI,EAAE;OACxB,GAAG,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,SAAGE,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,UAAU,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;OAChF,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;OACnB,GAAG,WAAC,EAAC,CAAC,AAAG;QACR,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC,MAAM,GAAGA,MAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACrCF,GAAK,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,UAAU,GAAGE,MAAI,CAAC,EAAE,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC;QACzE,MAAM,CAAC,IAAI,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,SAAG,CAAC,GAAG,IAAC,CAAC,CAAC;;QAE7B,CAAC,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACjC,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;QAEjCF,GAAK,CAAC,IAAI,GAAGE,MAAI,CAAC,YAAY,CAAC;;QAE/B,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;UACvB,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;UACnD,IAAI,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,IAAE,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,GAAC;SAC5D;aACI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAE,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,GAAC;aACrD,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAE,CAAC,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAC;;QAE/E,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;UACvB,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;UACnD,IAAI,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,IAAE,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,GAAC;SAC5D;aACI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAE,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,GAAC;aACrD,IAAI,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAE,CAAC,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAC;;QAE/EF,GAAK,CAAC,UAAU,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;;;QAGrC,IAAI,CAAC,CAAC,MAAM,KAAK,UAAU,EAAE;UAC3B,CAAC,CAAC,MAAM,GAAG,UAAU,CAAC;UACtB,CAAC,CAAC,KAAK,GAAGE,MAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;UACvC,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;UAC3B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,UAAU,GAAG,CAAC,CAAC;SAChC;aACI,IAAI,CAAC,CAAC,MAAM,KAAK,YAAY,EAAE;;UAElC,CAAC,CAAC,MAAM,GAAGA,MAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;UACxC,CAAC,CAAC,KAAK,GAAG,UAAU,CAAC;UACrB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,UAAU,GAAG,CAAC,CAAC;UAC/B,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;;;QAGD,CAAC,CAAC,MAAM,CAAC,OAAO,UAAC,CAAC,SAAS,EAAE,KAAK,EAAE,AAAG;UACrCF,GAAK,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,KAAK,UAAU,GAAGE,MAAI,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;;UAE9F,IAAI,KAAK,GAAG,CAAC,CAAC,UAAU,IAAI,KAAK,GAAG,CAAC,CAAC,UAAU,EAAE;YAChDF,GAAK,CAAC,OAAO,GAAG,EAAE,CAAC;YACnB,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;YAC1B,OAAO,CAAC,IAAI,GAAG,SAAS,CAAC;YACzB,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC;YAClB,OAAO,CAAC,OAAO,GAAGE,MAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;;YAElD,IAAI,CAAC,CAAC,MAAM,KAAK,UAAU,EAAE;cAC3B,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;cAChB,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC;cAClB,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC3B;iBACI,IAAI,CAAC,CAAC,MAAM,KAAK,YAAY,EAAE;cAClC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;cAChB,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC;cAClB,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC3B;WACF;;SAEF,CAAC,CAAC;;QAEH,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC;;QAEpB,OAAO,CAAC,CAAC;OACV,CAAC,CAAC;;;IAGL,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE;OACnB,IAAI,CAAC,YAAY,CAAC;OAClB,CAAC,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,IAAC,CAAC;OACX,CAAC,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,IAAC,CAAC;OACX,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;OAC3D,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;OACxD,MAAM,EAAE,CAAC;;;IAGZ,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,EAAE;OACtB,IAAI,CAAC,YAAY,CAAC;OAClB,CAAC,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,MAAM,KAAK,UAAU,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,SAAM,CAAC;OAChD,CAAC,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,MAAM,KAAK,UAAU,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,IAAC,CAAC;OAChD,MAAM,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,MAAM,KAAK,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,SAAM,CAAC;OACnD,KAAK,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,MAAM,KAAK,UAAU,GAAG,CAAC,CAAC,KAAK,GAAG,IAAC,CAAC;OACjD,MAAM,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;OAClE,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;OAC1D,MAAM,EAAE,CAAC;;;;IAIZF,GAAK,CAAC,WAAW,GAAG,EAAE,CAAC;IACvB,YAAY,CAAC,OAAO,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;MAC7BA,GAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACdA,GAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACdA,GAAK,CAAC,SAAS,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,UAAU,CAAC;MACzCA,GAAK,CAAC,YAAY,GAAG,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,KAAK,CAAC;;MAE5C,IAAI,CAAC,CAAC,MAAM,KAAK,UAAU,EAAE;QAC3BA,GAAK,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QAC9BA,GAAK,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QACjC,WAAW,CAAC,IAAI;UACd,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,KAAE,CAAC,KAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,KAAK,CAAC;UAC5E,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,KAAE,CAAC,KAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,QAAQ,CAAC;SACtF,CAAC;OACH;WACI,IAAI,CAAC,CAAC,MAAM,KAAK,YAAY,EAAE;QAClCA,GAAK,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;QAC7BA,GAAK,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;QAChC,WAAW,CAAC,IAAI;UACd,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,KAAE,CAAC,EAAE,CAAC,EAAE,IAAI,KAAE,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,OAAO,CAAC;UACjF,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,KAAE,CAAC,EAAE,CAAC,EAAE,OAAO,KAAE,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,CAAC;SACjF,CAAC;OACH;;KAEF,CAAC,CAAC;;;IAGH,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,EAAE;OAC1B,IAAI,CAAC,WAAW,CAAC;OACjB,MAAM,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;OACnE,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;OAC3D,MAAM,EAAE,CAAC;;;IAGZ,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;IAC3B,IAAI,EAAE;OACH,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,UAAO,CAAC;OACnB,OAAO,CAAC,WAAW,CAAC;OACpB,OAAO,WAAC,UAAS,CAAC,AAAG;QACpBA,GAAK,CAAC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC;QAChCE,MAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,EAAE;WAC/C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;WACtB,MAAM,CAAC,IAAI,CAAC,2BAAwB,SAAS,CAAE,EAAE,CAAC,MAAM,EAAEA,MAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;WAChF,MAAM,CAAC,UAAU,CAAC,IAAI,CAACA,MAAI,CAAC,CAACA,MAAI,CAAC,cAAc,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;WACtE,MAAM,EAAE,CAAC,CAAC;OACd,CAAC,CAAC;;IAEL,OAAO,IAAI,CAAC;IACb;;;;;;;;gBAQD,yBAAM,CAAC,CAAC,EAAE;IACR,IAAI,IAAI,CAAC,IAAI,IAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAC;IACnC,IAAI,IAAI,CAAC,OAAO,IAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,GAAC;IACzC,IAAI,IAAI,CAAC,QAAQ,IAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAC;IAC3C,IAAI,IAAI,CAAC,gBAAgB,IAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,WAAC,SAAQ,CAAC,SAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAC,CAAC,GAAC;IAC1F;;;;;;;;gBAQD,qBAAI,CAAC,CAAC,EAAE;IACN,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;IAC/D;;;;;;;;gBAQD,uBAAK,CAAC,CAAC,EAAE;IACP,IAAI,IAAI,CAAC,IAAI,IAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAC;IAClC,IAAI,IAAI,CAAC,OAAO,IAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,GAAC;IACxC,IAAI,IAAI,CAAC,QAAQ,IAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,GAAC;IAC1C,IAAI,IAAI,CAAC,gBAAgB,IAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,WAAC,SAAQ,CAAC,SAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAC,CAAC,GAAC;IACzF;;;;;;;;gBAQD,qCAAY,CAAC,CAAC,EAAE;IACd,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;IAC3G;;;;;;;;gBAQD,yBAAM,CAAC,CAAC,EAAE;IACR,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;IAC3G;;;;;;;;gBAQD,2BAAO,CAAC,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC7G;;;;;;;;gBAQD,uCAAa,CAAC,CAAC,EAAE;IACf,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;IAC9G;;;;;;;;gBAQD,iCAAU,CAAC,CAAC,EAAE;IACZ,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;IACrG;;;;;;;;;;;;gBAYD,+BAAS,CAAC,CAAC,EAAE;IACX,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;IACjH;;;;;;;;gBAQD,2BAAM,CAAC,CAAC,EAAE;IACR,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;IAC3E;;;;;;;;gBAQD,uCAAa,CAAC,CAAC,EAAE;IACf,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;IAC9G;;;;;;;;gBAQD,mCAAW,CAAC,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;IAC3G;;;;;;;;;;;;gBAYD,eAAC,CAAC,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;IACjG;;;;;;;;;;;;gBAYD,eAAC,CAAC,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;GACjG;;;EAxW8B;;mBA0WhC;"}