{"version":3,"file":"Circle.js","sources":["../../../src/Shape/Circle.js"],"sourcesContent":["import {accessor, assign, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\n\n/**\n    @class Circle\n    @extends Shape\n    @desc Creates SVG circles based on an array of data.\n*/\nexport default class Circle extends Shape {\n\n  /**\n      @memberof Circle\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n    super(\"circle\");\n    this._labelBounds = (d, i, s) =>\n      ({width: s.r * 1.5, height: s.r * 1.5, x: -s.r * 0.75, y: -s.r * 0.75});\n    this._labelConfig = assign(this._labelConfig, {\n      textAnchor: \"middle\",\n      verticalAlign: \"middle\"\n    });\n    this._name = \"Circle\";\n    this._r = accessor(\"r\");\n  }\n\n  /**\n      @memberof Circle\n      @desc Provides the default positioning to the <rect> elements.\n      @private\n  */\n  _applyPosition(elem) {\n    elem\n      .attr(\"r\", (d, i) => this._r(d, i))\n      .attr(\"x\", (d, i) => -this._r(d, i) / 2)\n      .attr(\"y\", (d, i) => -this._r(d, i) / 2);\n  }\n\n  /**\n      @memberof Circle\n      @desc Draws the circles.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"r\", 0).attr(\"x\", 0).attr(\"y\", 0)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .call(this._applyPosition.bind(this));\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .call(this._applyPosition.bind(this));\n\n    this._exit.transition(this._transition)\n      .attr(\"r\", 0).attr(\"x\", 0).attr(\"y\", 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Circle\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {r: this._r(d, i)};\n  }\n\n  /**\n      @memberof Circle\n      @desc If *value* is specified, sets the radius accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.r;\n}\n  */\n  r(_) {\n    return arguments.length ? (this._r = typeof _ === \"function\" ? _ : constant(_), this) : this._r;\n  }\n\n}\n"],"names":["super","this"],"mappings":"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"}