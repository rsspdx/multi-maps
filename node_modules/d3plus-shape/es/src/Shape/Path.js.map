{"version":3,"file":"Path.js","sources":["../../../src/Shape/Path.js"],"sourcesContent":["import {accessor, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\nimport largestRect from \"../geom/largestRect\";\nimport path2polygon from \"../geom/path2polygon\";\n\n/**\n    @class Path\n    @extends Shape\n    @desc Creates SVG Paths based on an array of data.\n*/\nexport default class Path extends Shape {\n\n  /**\n      @memberof Path\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n    super(\"path\");\n    this._d = accessor(\"path\");\n    this._labelBounds = (d, i, aes) => {\n      const r = largestRect(aes.points, {angle: this._labelConfig.rotate ? this._labelConfig.rotate(d, i) : 0});\n      return {angle: r.angle, width: r.width, height: r.height, x: r.cx - r.width / 2, y: r.cy - r.height / 2};\n    };\n    this._name = \"Path\";\n    this._labelConfig = Object.assign(this._labelConfig, {\n      textAnchor: \"middle\",\n      verticalAlign: \"middle\"\n    });\n  }\n\n  /**\n      @memberof Path\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {points: path2polygon(this._d(d, i))};\n  }\n\n  /**\n      @memberof Path\n      @desc Draws the paths.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"opacity\", 0)\n      .attr(\"d\", this._d)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .attr(\"opacity\", 1);\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .attr(\"opacity\", 1)\n      .attr(\"d\", this._d);\n\n    this._exit.transition(this._transition)\n      .attr(\"opacity\", 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Path\n      @desc If *value* is specified, sets the \"d\" attribute accessor to the specified function or number and returns the current class instance.\n      @param {Function|String} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.path;\n}\n  */\n  d(_) {\n    return arguments.length ? (this._d = typeof _ === \"function\" ? _ : constant(_), this) : this._d;\n  }\n\n}\n"],"names":["super","const","this"],"mappings":"AAAA,QAAQ,QAAQ,EAAE,QAAQ,OAAO,eAAe,CAAC;;AAEjD,OAAO,KAAK,MAAM,SAAS,CAAC;AAC5B,OAAO,WAAW,MAAM,qBAAqB,CAAC;AAC9C,OAAO,YAAY,MAAM,sBAAsB,CAAC;;;;;;;AAOhD,AAAe,IAAM,IAAI,GAAc;EAOrC,aAAW,GAAG;;AAAC;IACbA,UAAK,OAAC,MAAM,CAAC,CAAC;IACd,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC3B,IAAI,CAAC,YAAY,YAAG,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,AAAG;MACjCC,GAAK,CAAC,CAAC,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,KAAK,EAAEC,MAAI,CAAC,YAAY,CAAC,MAAM,GAAGA,MAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC1G,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC1G,CAAC;IACF,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;IACpB,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE;MACnD,UAAU,EAAE,QAAQ;MACpB,aAAa,EAAE,QAAQ;KACxB,CAAC,CAAC;;;;;oCACJ;;;;;;;;;iBASD,qBAAI,CAAC,CAAC,EAAE,CAAC,EAAE;IACT,OAAO,CAAC,MAAM,EAAE,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9C;;;;;;;;iBAQD,yBAAM,CAAC,QAAQ,EAAE;;IAEfF,eAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvB,IAAI,CAAC,MAAM;OACR,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;OAClB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC;OAClB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC5B,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;;IAEtB,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;OAClB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;;IAEtB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACpC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;;IAEtB,OAAO,IAAI,CAAC;;IAEb;;;;;;;;;;;;iBAYD,eAAC,CAAC,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;GACjG;;;EAzE+B;;oBA2EjC;"}