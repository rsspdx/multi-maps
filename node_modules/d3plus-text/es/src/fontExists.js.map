{"version":3,"file":"fontExists.js","sources":["../../src/fontExists.js"],"sourcesContent":["import {default as textWidth} from \"./textWidth\";\nimport {trim} from \"./trim\";\n\nconst alpha = \"abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890\",\n      checked = {},\n      height = 32;\n\nlet dejavu, macos, monospace, proportional;\n\n/**\n    @function fontExists\n    @desc Given either a single font-family or a list of fonts, returns the name of the first font that can be rendered, or `false` if none are installed on the user's machine.\n    @param {String|Array} font Can be either a valid CSS font-family string (single or comma-separated names) or an Array of string names.\n*/\nconst fontExists = font => {\n\n  if (!dejavu) {\n    dejavu = textWidth(alpha, {\"font-family\": \"DejaVuSans\", \"font-size\": height});\n    macos = textWidth(alpha, {\"font-family\": \"-apple-system\", \"font-size\": height});\n    monospace = textWidth(alpha, {\"font-family\": \"monospace\", \"font-size\": height});\n    proportional = textWidth(alpha, {\"font-family\": \"sans-serif\", \"font-size\": height});\n  }\n\n  if (!(font instanceof Array)) font = font.split(\",\");\n  font = font.map(f => trim(f));\n\n  for (let i = 0; i < font.length; i++) {\n    const fam = font[i];\n    if (checked[fam] || [\"-apple-system\", \"monospace\", \"sans-serif\", \"DejaVuSans\"].includes(fam)) return fam;\n    else if (checked[fam] === false) continue;\n    const width = textWidth(alpha, {\"font-family\": fam, \"font-size\": height});\n    checked[fam] = width !== monospace;\n    if (checked[fam]) checked[fam] = width !== proportional;\n    if (macos && checked[fam]) checked[fam] = width !== macos;\n    if (dejavu && checked[fam]) checked[fam] = width !== dejavu;\n    if (checked[fam]) return fam;\n  }\n\n  return false;\n\n};\n\n\nexport default fontExists;\n"],"names":["const","let"],"mappings":"AAAA,QAAQ,OAAO,IAAI,SAAS,OAAO,aAAa,CAAC;AACjD,QAAQ,IAAI,OAAO,QAAQ,CAAC;;AAE5BA,GAAK,CAAC,KAAK,GAAG,2CAA2C;MACnD,OAAO,GAAG,EAAE;MACZ,MAAM,GAAG,EAAE,CAAC;;AAElBC,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,YAAY,CAAC;;;;;;;AAO3CD,GAAK,CAAC,UAAU,aAAG,KAAI,CAAC,AAAG;;EAEzB,IAAI,CAAC,MAAM,EAAE;IACX,MAAM,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;IAC9E,KAAK,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC,aAAa,EAAE,eAAe,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;IAChF,SAAS,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC,aAAa,EAAE,WAAW,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;IAChF,YAAY,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;GACrF;;EAED,IAAI,CAAC,CAAC,IAAI,YAAY,KAAK,CAAC,IAAE,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAC;EACrD,IAAI,GAAG,IAAI,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,IAAI,CAAC,CAAC,IAAC,CAAC,CAAC;;EAE9B,KAAKC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACpCD,GAAK,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IACpB,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAE,OAAO,GAAG,GAAC;SACpG,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,KAAK,IAAE,WAAS;IAC1CA,GAAK,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC,aAAa,EAAE,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;IAC1E,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,KAAK,SAAS,CAAC;IACnC,IAAI,OAAO,CAAC,GAAG,CAAC,IAAE,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,KAAK,YAAY,GAAC;IACxD,IAAI,KAAK,IAAI,OAAO,CAAC,GAAG,CAAC,IAAE,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,KAAK,KAAK,GAAC;IAC1D,IAAI,MAAM,IAAI,OAAO,CAAC,GAAG,CAAC,IAAE,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,KAAK,MAAM,GAAC;IAC5D,IAAI,OAAO,CAAC,GAAG,CAAC,IAAE,OAAO,GAAG,GAAC;GAC9B;;EAED,OAAO,KAAK,CAAC;;CAEd,CAAC;;;AAGF,eAAe,UAAU,CAAC;"}