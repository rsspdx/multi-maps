{"version":3,"file":"click.legend.js","sources":["../../../src/on/click.legend.js"],"sourcesContent":["import {merge} from \"d3-array\";\nimport {event} from \"d3-selection\";\n\n/**\n    @desc On click event for all legend shapes in a Viz.\n    @param {Object} *d* The data object being interacted with.\n    @param {Number} *i* The index of the data object being interacted with.\n    @private\n*/\nexport default function(d, i) {\n\n  this._select.style(\"cursor\", \"auto\");\n  if (this._tooltip) this._tooltipClass.data([]).render();\n\n  let id = this._id(d, i);\n  if (!(id instanceof Array)) id = [id];\n  const hiddenIndex = this._hidden.indexOf(id[0]);\n  const soloIndex = this._solo.indexOf(id[0]);\n  const dataLength = merge(this._legendClass.data().map((d, i) => {\n    let id = this._id(d, i);\n    if (!(id instanceof Array)) id = [id];\n    return id;\n  })).length;\n\n  if (event.shiftKey) {\n    if (soloIndex < 0) {\n      this._solo = id;\n      this._hidden = [];\n      this.render();\n    }\n  }\n  else {\n    if (soloIndex >= 0) this._solo.splice(soloIndex, id.length);\n    else if (this._solo.length) this._solo = this._solo.concat(id);\n    else if (hiddenIndex >= 0) this._hidden.splice(hiddenIndex, id.length);\n    else this._hidden = this._hidden.concat(id);\n    if (this._solo.length === dataLength) this._solo = [];\n    if (this._hidden.length === dataLength) this._hidden = [];\n    this.render();\n  }\n\n}\n"],"names":["let","const","this"],"mappings":"AAAA,QAAQ,KAAK,OAAO,UAAU,CAAC;AAC/B,QAAQ,KAAK,OAAO,cAAc,CAAC;;;;;;;;AAQnC,eAAe,SAAS,CAAC,EAAE,CAAC,EAAE;;AAAC;;EAE7B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;EACrC,IAAI,IAAI,CAAC,QAAQ,IAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,GAAC;;EAExDA,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACxB,IAAI,CAAC,CAAC,EAAE,YAAY,KAAK,CAAC,IAAE,EAAE,GAAG,CAAC,EAAE,CAAC,GAAC;EACtCC,GAAK,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAChDA,GAAK,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAC5CA,GAAK,CAAC,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,GAAG,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;IAC9DD,GAAG,CAAC,EAAE,GAAGE,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxB,IAAI,CAAC,CAAC,EAAE,YAAY,KAAK,CAAC,IAAE,EAAE,GAAG,CAAC,EAAE,CAAC,GAAC;IACtC,OAAO,EAAE,CAAC;GACX,CAAC,CAAC,CAAC,MAAM,CAAC;;EAEX,IAAI,KAAK,CAAC,QAAQ,EAAE;IAClB,IAAI,SAAS,GAAG,CAAC,EAAE;MACjB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;MAChB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;MAClB,IAAI,CAAC,MAAM,EAAE,CAAC;KACf;GACF;OACI;IACH,IAAI,SAAS,IAAI,CAAC,IAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,MAAM,CAAC,GAAC;SACvD,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,GAAC;SAC1D,IAAI,WAAW,IAAI,CAAC,IAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC,MAAM,CAAC,GAAC;WAClE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,GAAC;IAC5C,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,UAAU,IAAE,IAAI,CAAC,KAAK,GAAG,EAAE,GAAC;IACtD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,UAAU,IAAE,IAAI,CAAC,OAAO,GAAG,EAAE,GAAC;IAC1D,IAAI,CAAC,MAAM,EAAE,CAAC;GACf;;CAEF;"}